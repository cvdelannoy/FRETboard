<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans&display=swap" rel="stylesheet">


    <title>FRETboard report</title>
    <script src="https://cdn.pydata.org/bokeh/release/bokeh-1.3.4.min.js"></script>
    <script src="https://cdn.pydata.org/bokeh/release/bokeh-widgets-1.3.4.min.js"></script>
    <script src="https://cdn.pydata.org/bokeh/release/bokeh-tables-1.3.4.min.js"></script>
    {{ hmm_table_script }}
    {{ tdp_hex_script }}
</head>
<style>

    {# For table formatting, from: https://css-tricks.com/simple-css-row-column-highlighting/#}
    table {overflow: hidden; border-collapse:collapse}
    tr:hover {background-color: #ffa;}
    td, th {position: relative;border: 1px solid black}
    td:hover::after,
    th:hover::after {
      content: "";
      position: absolute;
      background-color: #ffa;
      left: 0;
      top: -5000px;
      height: 10000px;
      width: 100%;
      z-index: -1;
    }
</style>

<body style='font-family:"Noto Sans"'>
{{ date }}
<h1>FRETboard report</h1>

<h3>FRET efficiency statistics </h3>
Note: these statistics are derived from the actual dataset, not the model

<h4>FRET efficiency per state</h4>
<div class="container">{{ data_efret_stats }}</div>

<h4>transition rate matrix</h4>
<div class="container"> {{ data_tm_div }}</div>

<h3>Emissions</h3>
Mean (mu) and standard deviation (sd) per state and feature.
<div class="container"> {{ em_table_div }} </div>

<h3>Transitions</h3>
Estimates with 95% bootstrap confidence intervals.
<div class="container"> {{ tm_table_div }} </div>
<input type="button" id="dwn-btn" value="Download csv"/>
<script>
        function download(filename, text) {
            var element = document.createElement('a');
            element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
            element.setAttribute('download', filename);
            element.style.display = 'none';
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
            }
        // Start file download.
        document.getElementById("dwn-btn").addEventListener("click", function(){
        // Generate download of hello.txt file with some content
        var text = "{{ transition_csv }}";
        var filename = "FRETboard_transition_rates.csv";
        download(filename, text);
        }, false);
</script>

<h3>Sample fret efficiency per state</h3>
{{ efret_hist }}

<h3>Fret efficiency vs event duration</h3>
{{ ed_scatter }}

<h3>Transition density plot</h3>
{{ transition_density_plot }}

<h3>Model parameters</h3>
{{ model_params }}

<br/>
<hr>
<br/>
Report generated by <b>FRETboard</b>, a semi-supervised classification tool <br/>
<a href="https://fret-board.herokuapp.com">Heroku app</a> - <a href="https://github.com/cvdelannoy/FRETboard">Github</a><br/>
Please cite this tool as: [PUBLICATION PENDING] <br/>
with &hearts; from Wageningen University
</body>
</html>